# LAYOUT002 共通ヘッダー設計書

※ 本設計書は、フロント側ユーザー画面に共通で表示する「ヘッダー」のUI/仕様を定義する。  
※ 共通フッターは「LAYOUT001 共通フッター設計書」を参照。

---

## 1. 画面概要

### 1.1 画面の目的

- フロント側の全ユーザー向け画面（ホーム／講座詳細／動画視聴／マイページ 等）において、統一されたヘッダーを表示し、以下を提供することを目的とする。
  - サイト全体で一貫したブランド表現（ロゴ・サービス名）
  - グローバルナビゲーション（講座一覧・サービス紹介 等）
  - ログイン状態に応じたアクション導線（ログイン／会員登録／マイページ／ログアウト）

### 1.2 利用者ロール

| ロールID | ロール名         | 権限概要                                                     |
|----------|------------------|--------------------------------------------------------------|
| R001     | 管理者           | フロント画面の動作確認で閲覧、ナビゲーション利用           |
| R002     | 受講者           | 通常利用で閲覧・クリック操作                                |
| R003     | 未ログイン利用者 | 通常閲覧（ログイン／会員登録導線を利用）                   |

※ ヘッダー自体は全ロールで閲覧可能。  
※ ボタン押下後の遷移先画面の権限制御は各画面側の責務とする。

### 1.3 関連機能・関連API

| 種別 | ID        | 名称                                          | 用途                                                         |
|------|-----------|-----------------------------------------------|--------------------------------------------------------------|
| 機能 | F-H001    | 共通ヘッダー表示                             | フロント側画面上部にヘッダーを表示                          |
| 機能 | F-H002    | ロゴクリック → TOP遷移                       | ホーム画面（SCR101）へ遷移                                  |
| 機能 | F-H003    | ナビゲーションリンク遷移                     | 講座一覧／サービス紹介 等の画面へ遷移                       |
| 機能 | F-H004    | ログイン／会員登録ボタンクリック             | 認証関連画面へ遷移                                           |
| 機能 | F-H005    | マイページ／ログアウトクリック                | マイページ遷移／ログアウト処理                               |
| 機能 | F-H006    | スマホ向けメニュー開閉（ハンバーガーメニュー）| SP表示時のナビゲーション表示切替                            |
| API  | なし（初期） | ―                                          | 初期実装では静的コンポーネント。認証情報はフロントの状態管理で利用 |

※ ログイン状態は、フロントアプリ内の認証情報（JWT等）を参照し、ヘッダー内表示を出し分ける。

---

## 2. 画面レイアウト設計（UI仕様）

### 2.1 ワイヤーフレーム（テキスト説明）

#### PCレイアウト（横並び）

- ヘッダー全体（画面上部、横幅一杯）
  - 左エリア：
    - ロゴ画像
    - サービス名（テキスト）
  - 中央エリア：
    - グローバルナビゲーション（テキストリンク）
      - 「講座一覧」
      - 「サービス紹介」（必要に応じて）
  - 右エリア（ログイン状態に応じて出し分け）：
    - 未ログインの場合：
      - 「ログイン」ボタン
      - 「会員登録」ボタン
    - ログイン済みの場合：
      - 「マイページ」リンク
      - 「ログアウト」ボタン

#### スマホレイアウト（SP）

- 上段：
  - 左：ロゴ／サービス名
  - 右：ハンバーガーメニューアイコン（≡）
- 下またはドロワー：
  - メニュー展開時に、縦並びのメニューを表示
    - 「講座一覧」
    - 「サービス紹介」（任意）
    - 「ログイン／会員登録」または「マイページ／ログアウト」

※ スクロール時にヘッダーを固定表示（sticky）するかどうかは、UI方針により決定（初期は固定でも可）。

### 2.2 UIコンポーネント一覧

| UI ID  | コンポーネント種類 | ラベル                         | 説明                                                         |
|--------|---------------------|--------------------------------|--------------------------------------------------------------|
| UI-H01 | Container          | 共通ヘッダーコンテナ           | ヘッダー全体を包むコンテナ                                   |
| UI-H02 | Image              | ロゴ                           | クリックでTOPへ遷移                                          |
| UI-H03 | Text               | サービス名                     | ロゴ横に表示されるサービス名                                 |
| UI-H04 | NavLink            | 講座一覧                       | 講座一覧画面（SCR102 と別の一覧画面）へのリンク             |
| UI-H05 | NavLink (任意)     | サービス紹介                   | サービス概要ページへのリンク                                 |
| UI-H06 | Button / Link      | ログイン                       | ログイン画面への遷移ボタン（未ログイン時のみ表示）          |
| UI-H07 | Button / Link      | 会員登録                       | 会員登録画面への遷移ボタン（未ログイン時のみ表示）          |
| UI-H08 | Link               | マイページ                     | マイページ（SCR104）へのリンク（ログイン時のみ表示）        |
| UI-H09 | Button             | ログアウト                     | ログアウト処理（ログイン時のみ表示）                         |
| UI-H10 | IconButton         | ハンバーガーメニュー           | SP時のメニュー開閉用ボタン                                  |
| UI-H11 | Drawer / Modal     | SPナビゲーションメニュー       | SP時にハンバーガークリックで開くメニュー領域                |

---

## 3. 画面項目定義（Field Definition）

### 3.1 入力項目一覧

ヘッダー自体にはユーザー入力フォームは存在しないため、「ボタン押下／クリックイベント」を除き入力項目なし。

| No | UI ID | 項目名 | 型 | 必須 | 桁数 | バリデーション | 備考 |
|----|-------|--------|----|------|------|----------------|------|
| -  | -     | -      | -  | -    | -    | -              | -    |

### 3.2 表示項目一覧

※ 文言は基本静的だが、将来マスタ管理を想定したDB名を記載（任意）。

| No | UI ID  | 表示名             | DB項目（想定）                   | 型      | 備考                               |
|----|--------|--------------------|----------------------------------|---------|------------------------------------|
| 1  | UI-H02 | ロゴ画像URL        | M_SITE_INFO.logo_url            | string  | サイト共通ロゴ                     |
| 2  | UI-H03 | サービス名         | M_SITE_INFO.service_name        | string  | 例：「美容オンラインアカデミー」   |
| 3  | UI-H04 | 講座一覧ラベル     | M_SITE_INFO.nav_courses_label   | string  | 例：「講座一覧」                   |
| 4  | UI-H04 | 講座一覧URL        | M_SITE_INFO.nav_courses_url     | string  | 例：「/courses」                   |
| 5  | UI-H05 | サービス紹介ラベル | M_SITE_INFO.nav_about_label     | string  | 任意                               |
| 6  | UI-H05 | サービス紹介URL    | M_SITE_INFO.nav_about_url       | string  | 任意                               |
| 7  | UI-H06 | ログインラベル     | 固定文言 or M_SITE_INFO.login_label | string  | 例：「ログイン」                   |
| 8  | UI-H06 | ログインURL        | M_SITE_INFO.login_url           | string  | 例：「/login」                     |
| 9  | UI-H07 | 会員登録ラベル     | 固定文言 or M_SITE_INFO.signup_label | string | 例：「会員登録」                   |
| 10 | UI-H07 | 会員登録URL        | M_SITE_INFO.signup_url          | string  | 例：「/signup」                    |
| 11 | UI-H08 | マイページラベル   | 固定文言                        | string  | 例：「マイページ」                 |
| 12 | UI-H08 | マイページURL      | 固定（`/mypage`） or M_SITE_INFO.mypage_url | string |                                    |
| 13 | UI-H09 | ログアウトラベル   | 固定文言                        | string  | 例：「ログアウト」                 |

---

## 4. イベント処理定義（Event & Transition）

### 4.1 ボタン／イベント一覧

| イベントID | トリガー                         | 説明                                      | 呼び出すAPI          | 遷移先                        |
|------------|----------------------------------|-------------------------------------------|----------------------|-------------------------------|
| EVT-H01    | ロゴクリック                     | ホーム画面へ遷移                         | なし                 | `/`（SCR101 ホーム）         |
| EVT-H02    | 「講座一覧」クリック             | 講座一覧画面へ遷移                       | なし                 | `/courses` 等                 |
| EVT-H03    | 「サービス紹介」クリック         | サービス紹介ページへ遷移                 | なし                 | `/about` 等（任意）          |
| EVT-H04    | 「ログイン」クリック             | ログイン画面へ遷移                       | なし                 | `/login`                      |
| EVT-H05    | 「会員登録」クリック             | 会員登録画面へ遷移                       | なし                 | `/signup`                     |
| EVT-H06    | 「マイページ」クリック           | マイページ画面へ遷移                     | なし                 | `/mypage`（SCR104）          |
| EVT-H07    | 「ログアウト」クリック           | ログアウト処理 → トークン削除 → TOP遷移 | API-Auth-Logout(※)   | `/`                           |
| EVT-H08    | ハンバーガーアイコンクリック     | SPメニューの開閉                         | なし（フロント制御） | 画面内（UI-H11の表示切替）   |
| EVT-H09    | SPメニュー内リンククリック       | 各遷移先画面へ遷移                       | なし                 | 各URL                         |

※ `API-Auth-Logout` は認証系API側で別途定義。ここではヘッダーから呼び出すだけ。

### 4.2 画面状態遷移（ヘッダー観点）

- 状態A：未ログイン表示状態
  - 右上に「ログイン」「会員登録」を表示
- 状態B：ログイン済み表示状態
  - 右上に「マイページ」「ログアウト」を表示
- 状態C：SPメニュー展開状態
  - ハンバーガークリックでメニュー（UI-H11）を表示
  - 遷移 or 再クリックで閉じる

---

## 5. エラー・メッセージ設計

### 5.1 入力エラー

- 入力フォームが存在しないため、入力エラーなし。

### 5.2 業務エラー

| メッセージID | 内容                                   | 発生条件                           |
|--------------|----------------------------------------|------------------------------------|
| MSG-H01      | ログアウト処理に失敗しました。         | API-Auth-Logout が失敗した場合     |

※ MSG-H01 の表示場所は、基本的には画面上部のグローバルエラーとして表示、またはトースト通知等で表現する。

---

## 6. APIインターフェース仕様（画面→API）

ヘッダー単体としては、設定情報取得用APIは使わず、  
認証状態はフロントアプリのストア（例：JWT / Cookie / context）から参照する前提とする。

### 6.1 ログアウトAPI（例：API-Auth-Logout）

※ 認証モジュール側で別途定義される想定。ここでは利用だけを明記。

| パラメータ | 型  | 必須 | 説明         |
|------------|-----|------|--------------|
| user_id    | int | 任意 | （JWTから判別可能なら不要） |

- レスポンス：成功／失敗ステータスのみ想定。

---

## 7. 権限・操作制御（RBAC）

### 7.1 操作権限表（ヘッダー内コンポーネント）

| ロール           | ロゴクリック | ナビリンク | ログイン | 会員登録 | マイページ | ログアウト |
|------------------|--------------|-----------|----------|----------|-----------|-----------|
| 管理者           | ○            | ○         | △※       | △※       | ○         | ○         |
| 受講者           | ○            | ○         | ×        | ×        | ○         | ○         |
| 未ログイン利用者 | ○            | ○         | ○        | ○        | ×        | ×        |

※ 管理者は通常フロント画面では「受講者相当」として扱う想定。  
※ 「△」は開発・検証環境などで利用される可能性があるため付与。

---

## 8. 帳票設計（Report Design）

- 共通ヘッダーから直接帳票出力を行う機能は持たないため、対象外とする。

| 帳票ID | 帳票名 | 出力形式 | 出力トリガー | 備考 |
|--------|--------|----------|--------------|------|
| -      | -      | -        | -            | -    |

---

## 9. 対応DB（参照／更新）

初期実装では DB 直接参照は行わず、設定値はコード or 環境変数で持つ前提とするが、  
将来のマスタ管理に備えて想定テーブルを整理しておく。

| テーブルID  | テーブル名       | 使用用途                          | 備考                |
|-------------|------------------|-----------------------------------|---------------------|
| M_SITE_INFO | サイト情報マスタ | ロゴURL・サービス名・各種ナビURL | フッターと共通で利用可 |

---

## 10. 非機能（画面観点）

| 項目              | 内容                                                                 |
|-------------------|----------------------------------------------------------------------|
| 表示応答時間      | ページ表示時に即時表示されること（フッターと同等）                 |
| スクロール動作    | ページスクロール時も常に上部に表示（固定ヘッダー）とするかは要件次第 |
| レスポンシブ対応  | PCでは横並び、SPではハンバーガー＋ドロワーメニューに自動切替       |
| アクセシビリティ  | キーボード操作で全リンクにフォーカス可能、aria-label 等を設定       |
| 一貫性            | フロント全ページで同一ヘッダーレイアウト・文言が表示されること       |

---

## 11. 前提・制約

- 対象：フロント側ユーザー画面
  - ホーム（TOP）、講座詳細、動画視聴ページ、マイページ、ログイン／会員登録画面 等
  - 管理画面（/admin 配下）は、別レイアウト（管理専用ヘッダー）を採用する。
- ログイン状態は、フロントアプリケーション側の認証機構（JWT / session 等）に依存する。
- ヘッダーの文言やリンク先URLの変更は、初期リリースではデプロイ単位で反映する。
- 将来的に多言語対応を行う場合、ヘッダー文言は i18n ファイル／マスタテーブルで管理する。

---
